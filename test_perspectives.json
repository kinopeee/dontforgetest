<!-- BEGIN TEST PERSPECTIVES JSON -->
{
  "version": 1,
  "cases": [
    {
      "caseId": "TC-N-01",
      "inputPrecondition": "Valid JSON object with version 1 and cases array",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with parsed PerspectiveJsonV1",
      "notes": "Standard happy path"
    },
    {
      "caseId": "TC-N-02",
      "inputPrecondition": "JSON object wrapped in code fence (```json ... ```)",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with parsed PerspectiveJsonV1 after stripping fence",
      "notes": "Code fence handling"
    },
    {
      "caseId": "TC-N-03",
      "inputPrecondition": "JSON object with surrounding text before and after",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with extracted JSON object",
      "notes": "extractJsonObject extracts { ... } from text"
    },
    {
      "caseId": "TC-N-04",
      "inputPrecondition": "JSON object with empty cases array",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with empty cases array",
      "notes": "Empty cases is valid"
    },
    {
      "caseId": "TC-E-01",
      "inputPrecondition": "Empty string input",
      "perspective": "Boundary – empty",
      "expectedResult": "Returns ok: false with error 'empty'",
      "notes": "Empty input handling"
    },
    {
      "caseId": "TC-E-02",
      "inputPrecondition": "Whitespace-only string",
      "perspective": "Boundary – empty",
      "expectedResult": "Returns ok: false with error 'empty'",
      "notes": "Trimmed empty string"
    },
    {
      "caseId": "TC-E-03",
      "inputPrecondition": "JSON array starting with '[' (e.g., '[1,2,3]')",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Array is valid JSON but not an object"
    },
    {
      "caseId": "TC-E-04",
      "inputPrecondition": "JSON array containing object '[{\"version\":1}]'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Array with object element is still array, not object"
    },
    {
      "caseId": "TC-E-05",
      "inputPrecondition": "Empty JSON array '[]'",
      "perspective": "Boundary – empty",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Empty array is valid JSON but not object"
    },
    {
      "caseId": "TC-E-06",
      "inputPrecondition": "JSON primitive null",
      "perspective": "Boundary – null",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "null is valid JSON but not object"
    },
    {
      "caseId": "TC-E-07",
      "inputPrecondition": "JSON primitive true",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Boolean true is valid JSON but not object"
    },
    {
      "caseId": "TC-E-08",
      "inputPrecondition": "JSON primitive false",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Boolean false is valid JSON but not object"
    },
    {
      "caseId": "TC-E-09",
      "inputPrecondition": "JSON string '\"hello\"'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "String is valid JSON but not object"
    },
    {
      "caseId": "TC-E-10",
      "inputPrecondition": "JSON number '123'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'no-json-object'",
      "notes": "Number is valid JSON but not object, and doesn't match special cases"
    },
    {
      "caseId": "TC-E-11",
      "inputPrecondition": "Text starting with '{' but missing closing '}'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'no-json-object'",
      "notes": "extractJsonObject fails, then checks for '{' start"
    },
    {
      "caseId": "TC-E-12",
      "inputPrecondition": "Invalid JSON syntax (e.g., '{version:1}')",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'invalid-json: <message>'",
      "notes": "JSON.parse throws exception"
    },
    {
      "caseId": "TC-E-13",
      "inputPrecondition": "Valid JSON object with version !== 1",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'unsupported-version'",
      "notes": "Version validation"
    },
    {
      "caseId": "TC-E-14",
      "inputPrecondition": "Valid JSON object with version = 0",
      "perspective": "Boundary – zero",
      "expectedResult": "Returns ok: false with error 'unsupported-version'",
      "notes": "Version 0 is not supported"
    },
    {
      "caseId": "TC-E-15",
      "inputPrecondition": "Valid JSON object with version = 2",
      "perspective": "Boundary – max+1",
      "expectedResult": "Returns ok: false with error 'unsupported-version'",
      "notes": "Version 2 is not supported (only version 1)"
    },
    {
      "caseId": "TC-E-16",
      "inputPrecondition": "Valid JSON object with cases as non-array (e.g., string)",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'cases-not-array'",
      "notes": "cases must be array"
    },
    {
      "caseId": "TC-E-17",
      "inputPrecondition": "Valid JSON object with cases as null",
      "perspective": "Boundary – null",
      "expectedResult": "Returns ok: false with error 'cases-not-array'",
      "notes": "cases cannot be null"
    },
    {
      "caseId": "TC-E-18",
      "inputPrecondition": "Valid JSON object with cases array containing non-object elements",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: true with cases array excluding non-object items",
      "notes": "Non-object items are skipped (continue in loop)"
    },
    {
      "caseId": "TC-E-19",
      "inputPrecondition": "Valid JSON object with cases array containing mixed object and non-object elements",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with only object items in cases array",
      "notes": "Filters out non-object items"
    },
    {
      "caseId": "TC-E-20",
      "inputPrecondition": "JSON array starting with '[' containing invalid JSON",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'invalid-json: <message>'",
      "notes": "JSON.parse fails for array syntax"
    },
    {
      "caseId": "TC-E-21",
      "inputPrecondition": "Text that doesn't start with '{', '[', '\"', 'null', 'true', 'false'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'no-json-object'",
      "notes": "No JSON object found and doesn't match primitive patterns"
    },
    {
      "caseId": "TC-N-05",
      "inputPrecondition": "JSON object with cases array containing objects with missing optional fields",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with empty strings for missing fields",
      "notes": "getStringOrEmpty handles missing fields gracefully"
    },
    {
      "caseId": "TC-N-06",
      "inputPrecondition": "JSON object with cases array containing objects with non-string field types",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with converted string values",
      "notes": "getStringOrEmpty converts numbers/booleans to strings"
    },
    {
      "caseId": "TC-B-01",
      "inputPrecondition": "JSON array with single element '[{\"version\":1,\"cases\":[]}]'",
      "perspective": "Boundary – min",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Single element array is still array"
    },
    {
      "caseId": "TC-B-02",
      "inputPrecondition": "JSON object with cases array containing exactly one case",
      "perspective": "Boundary – min",
      "expectedResult": "Returns ok: true with single case in array",
      "notes": "Minimum valid cases array size"
    },
    {
      "caseId": "TC-B-03",
      "inputPrecondition": "JSON object with cases array containing zero cases",
      "perspective": "Boundary – zero",
      "expectedResult": "Returns ok: true with empty cases array",
      "notes": "Empty cases array is valid"
    },
    {
      "caseId": "TC-B-04",
      "inputPrecondition": "Text with only opening brace '{'",
      "perspective": "Boundary – min",
      "expectedResult": "Returns ok: false with error 'no-json-object'",
      "notes": "extractJsonObject fails, then checks for '{' start"
    },
    {
      "caseId": "TC-B-05",
      "inputPrecondition": "Text with '{' at start but no matching '}'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'no-json-object'",
      "notes": "extractJsonObject returns undefined, then checks for '{' start"
    },
    {
      "caseId": "TC-E-22",
      "inputPrecondition": "parseTestExecutionJsonV1 with JSON array '[{\"version\":1}]'",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Same array handling logic as parsePerspectiveJsonV1"
    },
    {
      "caseId": "TC-E-23",
      "inputPrecondition": "parseTestExecutionJsonV1 with JSON primitive null",
      "perspective": "Boundary – null",
      "expectedResult": "Returns ok: false with error 'json-not-object'",
      "notes": "Same primitive handling logic as parsePerspectiveJsonV1"
    },
    {
      "caseId": "TC-E-24",
      "inputPrecondition": "parseTestExecutionJsonV1 with valid JSON object but version !== 1",
      "perspective": "Equivalence – error",
      "expectedResult": "Returns ok: false with error 'unsupported-version'",
      "notes": "Same version validation as parsePerspectiveJsonV1"
    },
    {
      "caseId": "TC-N-07",
      "inputPrecondition": "parseTestExecutionJsonV1 with valid JSON object version 1 and all required fields",
      "perspective": "Equivalence – normal",
      "expectedResult": "Returns ok: true with parsed TestExecutionJsonV1",
      "notes": "Standard happy path for test execution JSON"
    }
  ]
}
<!-- END TEST PERSPECTIVES JSON -->
